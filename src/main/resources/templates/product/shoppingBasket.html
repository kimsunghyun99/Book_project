<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>장바구니</title>
<style>
    body {
        font-family: Arial, sans-serif;
    }

    header {
        background-color: #007ACC;
        color: #FFF;
        text-align: center;
        padding: 10px;
    }

    nav {
        background-color: #333;
        color: #FFF;
        text-align: center;
        padding: 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
        vertical-align: middle;
    }

    td img {
        width: 100px; /* 이미지 크기 수정 */
        height: 100px; /* 이미지 크기 수정 */
        object-fit: cover;
    }

    .delete-button {
        padding: 10px;
        font-size: 1.2em;
        background-color: #dc3545;
        color: white;
        border: none;
        cursor: pointer;
    }

    .total-payment {
        display: flex;
        justify-content: space-between; /* 삭제 버튼과 결제 정보를 양 끝으로 배치 */
        align-items: center;
    }

    .total-payment p {
        margin-left: auto; /* 총 결제금액을 결제하기 버튼 옆으로 이동 */
        gap: 10px;
    }

    .payment-button {
        padding: 10px;
        font-size: 1.2em;
        background-color: #5cb85c;
        color: white;
        border: none;
        cursor: pointer;
    }
</style>

    <script>


        const count = (type, bookid) =>  {

            number = parseInt(document.getElementById('quantity'+bookid).innerHTML);
            if(type === 'plus') {
                number ++;
                totalPrice += price;
            }else if(type === 'minus' && number !==1 )  {
                number --;
                totalPrice -= price;
            }
            document.getElementById('quantity'+bookid).innerHTML = number;
            document.getElementById('total_price'+bookid).innerHTML = totalPrice.toLocaleString('ko-KR');
        }
        const GoPayment = () => {

        }



    </script>
</head>
<body>
<div th:include="/etc/header.html"></div>

<h1>장바구니</h1>
<table>
    <tr>
        <th><input type="checkbox"></th>
        <th>책</th>
        <th>가격</th>
        <th>총 금액</th>
    </tr>

    <tr>
        <th:block th:if="${list != null}">
            <tr th:each="booklist:${list}">

        <td>
            <input type="checkbox">
        </td>
        <td>
            <img class="book-image" id="cover" th:src="${booklist.cover}"><br>
            <span class="book-name" th:text="${booklist.bookname}"></span>
        </td>
        <td>
            <p class="book-price" id="price${booklist.bookid}" th:text="${#numbers.formatInteger(booklist.price,3,'COMMA')}"></p>
            <div id="volume">
                <input type='button' onclick='count("plus",`${booklist.bookid}`)' value='+'/>
                <span id="quantity${booklist.bookid}">1</span>
                <input type='button' onclick='count("minus")' value='-'/><br><br>
            </div>
        </td>
        <td>
            <span id="total_price">[[${#numbers.formatInteger(booklist.price,3,'COMMA')}]] 원</span>
        </td>

    </tr>

    </th:block>
    </tr>
    <tr>
    <th:block th:if="${list == null}">
        <td colspan="5">장바구니에 등록된 상품이 없습니다.</td>
    </th:block>
    </tr>
</table>
<!--            <p class="book-discount" th:text="'할인가: ' + ${view.pricesales} + '%'"></p>-->
<!--            <p class="book-price" th:text="'포인트 적립: ' + ${#numbers.formatInteger(view.pricesales * 0.05, 3, 'COMMA')} + '원'"></p>-->

<div class="total-payment">
    <button class="delete-button">삭제</button>
    <p>총 결제금액: 00000 원</p>
    <input type="button" value="구매하기" th:onclick="GoPayment()">
</div>
</body>
</html>