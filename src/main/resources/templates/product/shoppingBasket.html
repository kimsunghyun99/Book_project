<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>장바구니</title>
<style>
    body {
        font-family: Arial, sans-serif;
    }

    header {
        background-color: #007ACC;
        color: #FFF;
        text-align: center;
        padding: 10px;
    }

    nav {
        background-color: #333;
        color: #FFF;
        text-align: center;
        padding: 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
        vertical-align: middle;
    }

    td img {
        width: 100px; /* 이미지 크기 수정 */
        height: 100px; /* 이미지 크기 수정 */
        object-fit: cover;
    }

    .delete-button {
        padding: 10px;
        font-size: 1.2em;
        background-color: #dc3545;
        color: white;
        border: none;
        cursor: pointer;
    }

    .total-payment {
        display: flex;
        justify-content: space-between; /* 삭제 버튼과 결제 정보를 양 끝으로 배치 */
        align-items: center;
    }

    .total-payment p {
        margin-left: auto; /* 총 결제금액을 결제하기 버튼 옆으로 이동 */
        gap: 10px;
    }

    .payment-button {
        padding: 10px;
        font-size: 1.2em;
        background-color: #5cb85c;
        color: white;
        border: none;
        cursor: pointer;
    }
</style>

    <script>

        //상품 갯수 변경 업데이트
        const quantityUpdate = async (p_id,quantity) => {

            await fetch('/shop/pCart',{
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    cart_email: email,
                    p_id: p_id,
                    cart_quantity: quantity
                }),
            }).then((response) => response.text())
                .then((data) => {
                    if(data == null || data == '')
                        alert("시스템 장애로 상품 수량변경이 실패했습니다.");
                }).catch((error) => console.log("error = " + error));

        }



    </script>




</head>
<body>
<header>
    <h1>교보문고</h1>
</header>

<nav>
    <a href="#">홈</a> |
    <a href="#">도서</a> |
    <a href="#">이벤트</a> |
    <a href="#">마이페이지</a>
    <a href="/member/signup">회원가입</a>
</nav>

<h1>장바구니</h1>
<table>
    <tr>
        <th><input type="checkbox"></th>
        <th>책</th>
        <th>가격</th>
    </tr>

    <tr>
        <th:block th:if="${list != null}">
            <tr th:each="list:${list}">

            <td><input type="checkbox"></td>
        <td>
            <p class="book-price" th:text="'이미지: ' + ${list.cover} + "></p>
            <p class="book-price" th:text="'이미지: ' + ${list.bookname} + "></p>
        </td>

        <td>
            <p class="book-price" th:text="'가격: ' + ${list.pricesales} + '원'"></p>
            <p class="book-price" th:text="'수: ' + ${list.cartvolume} + '개'"></p>
        </td>

    </tr>

    </th:block>
</table>

    <th:block th:if="${list == null}">
        <td colspan="5">장바구니에 등록된 상품이 없습니다.</td>
    </th:block>





<!--            <p class="book-discount" th:text="'할인가: ' + ${view.pricesales} + '%'"></p>-->
<!--            <p class="book-price" th:text="'포인트 적립: ' + ${#numbers.formatInteger(view.pricesales * 0.05, 3, 'COMMA')} + '원'"></p>-->




<div class="total-payment">
    <button class="delete-button">삭제</button>
    <p>총 결제금액: 00000 원</p>
    <button class="payment-button">결제하기</button>
</div>
</body>
</html>